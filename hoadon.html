<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·∫®m th·ª±c Ph∆∞∆°ng Nam</title>
    <link rel="icon" type="image/x-icon" href="img/·∫©M TH·ª∞C.png" />
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script> <!-- Th√™m th∆∞ vi·ªán t·∫°o m√£ QR -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.3/dist/tailwind.min.css" rel="stylesheet"> <!-- Tailwind CSS -->
    <style>
        .qr-container {
            text-align: center;
            margin-top: 20px;
        }

        .invoice-container {
            max-width: 1500px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* ƒê·ªãnh d·∫°ng khi in */
        @media print {
            .no-print {
                display: none;
            }
        }

        /* C·ªôt t√™n m√≥n ƒÉn v√† gi√° */
        .invoice-table th, .invoice-table td {
            padding: 12px;
            text-align: left;
        }

        .invoice-table th {
            background-color: #f3f3f3;
            color: #5a4036;
        }

        .invoice-table td {
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="bg-gray-100 flex justify-center items-center min-h-screen">
        <div id="invoice" class="mt-8 bg-gray-50 border border-gray-300 shadow-lg rounded-xl p-12 w-full max-w-6xl">
            <!-- Heading -->
            <h2 class="text-5xl font-extrabold text-[#5a4036] tracking-wide border-b-4 border-[#5a4036] pb-4 mb-8">
                üßæ H√≥a ƒê∆°n
            </h2>
    
           <!-- Buyer Information -->
<div class="mb-8">
    <p><strong>H·ªç v√† t√™n:</strong> <span id="buyer-name"></span></p>
    <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span id="buyer-phone"></span></p>
    <p><strong>Email:</strong> <span id="buyer-email"></span></p>
    <p><strong>S·ªë t√†i kho·∫£n:</strong> <span id="buyer-account"></span></p>
    <p><strong>ƒê·ªãa ch·ªâ:</strong> <span id="buyer-address"></span></p>
</div>

    
            <!-- Cart Items -->
            <table class="w-full border-collapse border border-gray-300">
                <thead>
                    <tr>
                        <th class="border p-2">T√™n M√≥n</th>
                        <th class="border p-2">S·ªë L∆∞·ª£ng</th>
                        <th class="border p-2">Gi√°</th>
                        <th class="border p-2">T·ªïng</th>
                    </tr>
                </thead>
                <tbody id="cart-items"></tbody>
            </table>
    
            <!-- Total Amount -->
            <div class="mt-12 text-right">
                <strong class="text-3xl">T·ªïng ti·ªÅn: <span id="cart-total">0</span> VNƒê</strong>
            </div>

            <!-- N√∫t in h√≥a ƒë∆°n -->
       <div class="mt-8 text-center no-print">
        <button 
            onclick="window.print();" 
            class="bg-blue-500 text-white py-4 px-10 rounded-xl font-medium text-3xl hover:bg-blue-600 transition duration-300">
            In H√≥a ƒê∆°n
        </button>
    </div>
    <div class="flex space-x-4">
        <button id="save-invoice" class="bg-blue-500 text-white px-4 py-2 rounded">
            L∆∞u h√≥a ƒë∆°n
        </button>
        <button id="delete-invoice" class="bg-red-500 text-white px-4 py-2 rounded">
            X√≥a h√≥a ƒë∆°n
        </button>
    </div>
    
    
        </div>
        
    </div>
    
    
    <script>
        // L·∫•y th√¥ng tin ng∆∞·ªùi mua t·ª´ localStorage
        const buyerInfo = JSON.parse(localStorage.getItem('buyerInfo'));
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const invoiceHistory = JSON.parse(localStorage.getItem('invoiceHistory')) || [];
    
        // Hi·ªÉn th·ªã th√¥ng tin ng∆∞·ªùi mua
        document.getElementById('buyer-name').textContent = buyerInfo?.name || '';
        document.getElementById('buyer-phone').textContent = buyerInfo?.phone || '';
        document.getElementById('buyer-email').textContent = buyerInfo?.email || '';
        document.getElementById('buyer-account').textContent = buyerInfo?.account || '';
        document.getElementById('buyer-address').textContent = buyerInfo?.address || '';
    
        // Hi·ªÉn th·ªã gi·ªè h√†ng
        const cartItems = document.getElementById('cart-items');
        let total = 0;
    
        cart.forEach(item => {
            const tr = document.createElement('tr');
            const itemTotal = item.quantity * item.price;
    
            tr.innerHTML = `
                <td class="border p-2">${item.name}</td>
                <td class="border p-2">${item.quantity}</td>
                <td class="border p-2">${item.price.toLocaleString()} VNƒê</td>
                <td class="border p-2">${itemTotal.toLocaleString()} VNƒê</td>
            `;
    
            cartItems.appendChild(tr);
            total += itemTotal;
        });
    
        // Hi·ªÉn th·ªã t·ªïng ti·ªÅn
        document.getElementById('cart-total').textContent = total.toLocaleString();
    
        // L∆∞u h√≥a ƒë∆°n v√†o l·ªãch s·ª≠
        document.getElementById('save-invoice').addEventListener('click', () => {
            const newInvoice = {
                id: `INV-${Date.now()}`, // M√£ h√≥a ƒë∆°n duy nh·∫•t
                buyer: buyerInfo,
                items: cart,
                total: total,
                date: new Date().toISOString()
            };
    
            // Th√™m h√≥a ƒë∆°n m·ªõi v√†o danh s√°ch l·ªãch s·ª≠
            invoiceHistory.push(newInvoice);
            localStorage.setItem('invoiceHistory', JSON.stringify(invoiceHistory));
    
            // X√≥a gi·ªè h√†ng v√† hi·ªÉn th·ªã th√¥ng b√°o
            localStorage.removeItem('cart');
            alert('H√≥a ƒë∆°n ƒë√£ ƒë∆∞·ª£c l∆∞u v√† gi·ªè h√†ng ƒë√£ ƒë∆∞·ª£c x√≥a.');
    
            // Reload l·∫°i trang (t√πy √Ω)
            location.reload();
        });
    
        // X√≥a h√≥a ƒë∆°n hi·ªán t·∫°i
        document.getElementById('delete-invoice').addEventListener('click', () => {
            // X√≥a th√¥ng tin ng∆∞·ªùi mua v√† gi·ªè h√†ng
            localStorage.removeItem('buyerInfo');
            localStorage.removeItem('cart');
    
            alert('ƒê√£ x√≥a h√≥a ƒë∆°n v√† gi·ªè h√†ng.');
    
            // Reload l·∫°i trang
            location.reload();
        });


        
    </script>
    
    
</body>
</html>
